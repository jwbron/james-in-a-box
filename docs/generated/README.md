# Generated Documentation

This directory contains machine-readable documentation indexes generated by automated analysis tools.

## Files

| File | Description | Generator |
|------|-------------|-----------|
| `codebase.json` | Structured codebase analysis (components, files, relationships) | index-generator.py |
| `patterns.json` | Extracted code patterns and conventions | index-generator.py |
| `dependencies.json` | Internal and external dependency graph | index-generator.py |

## Purpose

These files enable LLMs to efficiently query specific information without loading entire documentation.

## Query Tool

Use the `query-index.py` CLI tool instead of raw jq:

```bash
# View codebase summary
bin/query-index summary

# Find component by name
bin/query-index component GitHubWatcher

# List all detected patterns
bin/query-index pattern

# Show specific pattern details
bin/query-index pattern connector

# Show project structure
bin/query-index structure

# Search across all indexes
bin/query-index search notification

# Show external dependencies
bin/query-index deps
```

Or use jq directly:

```bash
# Get info about a specific component
jq '.components[] | select(.name == "GitHubWatcher")' codebase.json

# Find files using a pattern
jq '.patterns.connector.examples' patterns.json

# Get external dependencies
jq '.external' dependencies.json
```

## Generation

Regenerate indexes manually:

```bash
bin/generate-index
# Or directly:
python3 host-services/analysis/index-generator/index-generator.py
```

Enable weekly auto-regeneration:

```bash
cd host-services/analysis/index-generator
./setup.sh enable
```

## Documentation Authoring (Phase 4)

Generate documentation from detected patterns:

```bash
# List available topics
bin/generate-docs --list-topics

# Generate status quo docs for a pattern
bin/generate-docs --topic notification --type status-quo

# Generate all pattern documentation
bin/generate-docs --all

# Preview without saving
bin/generate-docs --all --dry-run
```

Check for documentation drift:

```bash
# Check all docs for stale references
bin/check-doc-drift

# Check specific doc
bin/check-doc-drift --doc docs/architecture/README.md

# Include fix suggestions
bin/check-doc-drift --suggest-fixes

# JSON output for automation
bin/check-doc-drift --json
```

Enable weekly auto-generation:

```bash
bin/setup-doc-generator enable
```

## Generation Schedule

| Index | Frequency | Trigger |
|-------|-----------|---------|
| All indexes | Weekly (Sunday 3am) | Systemd timer (if enabled) |
| All indexes | On-demand | `bin/generate-index` |

## Schema

See [ADR: LLM Documentation Index Strategy](../adr/ADR-LLM-Documentation-Index-Strategy.md) for detailed schema definitions.

## Status

**Phase 1 (Complete):** Directory structure, navigation index, llms.txt
**Phase 2 (Complete):** Codebase analyzer with pattern extraction and dependency analysis
**Phase 3 (Complete):** Spec enrichment workflow
**Phase 4 (Complete):** LLM documentation authoring and drift detection

---

*Do not manually edit files in this directory. They are auto-generated.*
