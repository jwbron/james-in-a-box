[Unit]
Description=GitHub Watcher - Monitor GitHub and trigger jib analysis
Documentation=file://%h/khan/james-in-a-box/host-services/analysis/github-watcher/README.md
After=network-online.target
Wants=network-online.target
OnFailure=service-failure-notify@%n.service

[Service]
Type=oneshot
ExecStart=/usr/bin/python3 %h/khan/james-in-a-box/host-services/analysis/github-watcher/github-watcher.py
Environment=PATH=/usr/local/bin:/usr/bin:/bin:%h/.local/bin:%h/khan/james-in-a-box/bin

# Load secrets (includes GITHUB_TOKEN)
EnvironmentFile=%h/.config/jib/secrets.env

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=github-watcher

# Security (baseline)
NoNewPrivileges=yes
PrivateTmp=yes

[Install]
WantedBy=default.target
